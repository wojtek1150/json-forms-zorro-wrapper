"use strict";(self.webpackChunkjson_forms=self.webpackChunkjson_forms||[]).push([[408],{86238:(P,g,e)=>{e.d(g,{_:()=>a});var c=e(66092),i=e(65879);let a=(()=>{class u{constructor(){this.renderers=c.fnY,this.data={}}updateProperty(l,d){if("data"===l){const h=this.data;try{this.data=null,this.data=JSON.parse(d)}catch{this.data=h}}else if("schema"===l){const h=this.schema;try{this.schema=null,this.schema={...h,properties:JSON.parse(d)},this.data={...this.data}}catch{this.schema=h}}else{const h=this.uiSchema.elements[0];try{this.uiSchema.elements[0]=null,this.uiSchema.elements[0]=JSON.parse(d),this.data={...this.data}}catch{this.uiSchema.elements[0]=h}}}static#t=this.\u0275fac=function(d){return new(d||u)};static#i=this.\u0275dir=i.lG2({type:u})}return u})()},14383:(P,g,e)=>{e.d(g,{c:()=>i});var c=e(65879);let i=(()=>{class a{transform(_){return JSON.stringify(_,null,2)}static#t=this.\u0275fac=function(l){return new(l||a)};static#i=this.\u0275pipe=c.Yjl({name:"editorFormatter",type:a,pure:!0,standalone:!0})}return a})()},84712:(P,g,e)=>{e.d(g,{XZ:()=>b,qw:()=>N});var c=e(97582),i=e(65879),a=e(60095),u=e(97328),_=e(65619),l=e(22096),d=e(78645),h=e(52572),f=e(92438),x=e(99397),L=e(37398),E=e(59773),T=e(83620),S=e(32181),B=e(93997),C=e(17032),v=e(27754),m=e(96814),U=e(40874),K=e(62831),y=e(82669),W=e(62595);function F(o,O){1&o&&(i.TgZ(0,"div",2),i._UZ(1,"nz-spin"),i.qZA())}function j(o,O){}function $(o,O){if(1&o&&(i.TgZ(0,"div",3),i.YNc(1,j,0,0,"ng-template",4),i.qZA()),2&o){const t=i.oxw();i.xp6(1),i.Q6J("ngTemplateOutlet",t.nzToolkit)}}const M="codeEditor";function D(o){return(...O)=>{o&&o(...O)}}const I=new u.t(1);let p="unload",w=(()=>{class o{constructor(t,n){this.nzConfigService=t,this.firstEditorInitialized=!1,this.option={},this.option$=new _.X(this.option);const r=this.nzConfigService.getConfigForComponent(M);this.document=n,this.config={...r},this.config.monacoEnvironment&&(window.MonacoEnvironment={...this.config.monacoEnvironment}),this.option=this.config.defaultEditorOption||{},this.subscription=this.nzConfigService.getConfigChangeEventForComponent(M).subscribe(()=>{const s=this.nzConfigService.getConfigForComponent(M);s&&this._updateDefaultOption(s.defaultEditorOption)})}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription=null}_updateDefaultOption(t){this.option={...this.option,...t},this.option$.next(this.option),"theme"in t&&t.theme&&monaco.editor.setTheme(t.theme)}requestToInit(){return"LOADED"===p?(this.onInit(),(0,l.of)(this.getLatestOption())):("unload"===p&&(this.config.useStaticLoading&&typeof monaco>"u"?(0,C.ZK)("You choose to use static loading but it seems that you forget to config webpack plugin correctly. Please refer to our official websitefor more details about static loading."):this.loadMonacoScript()),I.pipe((0,x.b)(()=>this.onInit()),(0,L.U)(()=>this.getLatestOption())))}loadMonacoScript(){if(this.config.useStaticLoading)return void Promise.resolve().then(()=>this.onLoad());if("loading"===p)return;p="loading";const t=this.config.assetsRoot,n=t?`${t}/vs`:"assets/vs",r=window,s=this.document.createElement("script");s.type="text/javascript",s.src=`${n}/loader.js`;const z=()=>{R(),r.require.config({paths:{vs:n},...this.config.extraConfig}),r.require(["vs/editor/editor.main"],()=>{this.onLoad()})},A=()=>{throw R(),new Error(`${C.Bq} cannot load assets of monaco editor from source "${n}".`)},R=()=>{s.removeEventListener("load",z),s.removeEventListener("error",A),this.document.documentElement.removeChild(s)};s.addEventListener("load",z),s.addEventListener("error",A),this.document.documentElement.appendChild(s)}onLoad(){p="LOADED",I.next(!0),I.complete(),D(this.config.onLoad)()}onInit(){this.firstEditorInitialized||(this.firstEditorInitialized=!0,D(this.config.onFirstEditorInit)()),D(this.config.onInit)()}getLatestOption(){return{...this.option}}static#t=this.\u0275fac=function(n){return new(n||o)(i.LFG(U.jY),i.LFG(m.K0))};static#i=this.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),b=(()=>{class o{set nzEditorOption(t){this.editorOption$.next(t)}constructor(t,n,r,s){this.nzCodeEditorService=t,this.ngZone=n,this.platform=s,this.nzEditorMode="normal",this.nzOriginalText="",this.nzLoading=!1,this.nzFullControl=!1,this.nzEditorInitialized=new i.vpe,this.editorOptionCached={},this.destroy$=new d.x,this.resize$=new d.x,this.editorOption$=new _.X({}),this.editorInstance=null,this.value="",this.modelSet=!1,this.onDidChangeContentDisposable=null,this.onChange=z=>{},this.onTouch=()=>{},this.el=r.nativeElement,this.el.classList.add("ant-code-editor")}ngAfterViewInit(){this.platform.isBrowser&&this.nzCodeEditorService.requestToInit().pipe((0,E.R)(this.destroy$)).subscribe(t=>this.setup(t))}ngOnDestroy(){this.onDidChangeContentDisposable&&(this.onDidChangeContentDisposable.dispose(),this.onDidChangeContentDisposable=null),this.editorInstance&&(this.editorInstance.dispose(),this.editorInstance=null),this.destroy$.next(),this.destroy$.complete()}writeValue(t){this.value=t,this.setValue()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}layout(){this.resize$.next()}setup(t){this.ngZone.runOutsideAngular(()=>(0,v.ov)().pipe((0,E.R)(this.destroy$)).subscribe(()=>{this.editorOptionCached=t,this.registerOptionChanges(),this.initMonacoEditorInstance(),this.registerResizeChange(),this.setValue(),this.nzFullControl||this.setValueEmitter(),this.nzEditorInitialized.observers.length&&this.ngZone.run(()=>this.nzEditorInitialized.emit(this.editorInstance))}))}registerOptionChanges(){(0,h.a)([this.editorOption$,this.nzCodeEditorService.option$]).pipe((0,E.R)(this.destroy$)).subscribe(([t,n])=>{this.editorOptionCached={...this.editorOptionCached,...n,...t},this.updateOptionToMonaco()})}initMonacoEditorInstance(){this.ngZone.runOutsideAngular(()=>{this.editorInstance="normal"===this.nzEditorMode?monaco.editor.create(this.el,{...this.editorOptionCached}):monaco.editor.createDiffEditor(this.el,{...this.editorOptionCached})})}registerResizeChange(){this.ngZone.runOutsideAngular(()=>{(0,f.R)(window,"resize").pipe((0,T.b)(300),(0,E.R)(this.destroy$)).subscribe(()=>{this.layout()}),this.resize$.pipe((0,E.R)(this.destroy$),(0,S.h)(()=>!!this.editorInstance),(0,L.U)(()=>({width:this.el.clientWidth,height:this.el.clientHeight})),(0,B.x)((t,n)=>t.width===n.width&&t.height===n.height),(0,T.b)(50)).subscribe(()=>{this.editorInstance.layout()})})}setValue(){if(this.editorInstance){if(this.nzFullControl&&this.value)return void(0,C.ZK)("should not set value when you are using full control mode! It would result in ambiguous data flow!");if("normal"===this.nzEditorMode)if(this.modelSet){const t=this.editorInstance.getModel();this.preservePositionAndSelections(()=>t.setValue(this.value))}else this.editorInstance.setModel(monaco.editor.createModel(this.value,this.editorOptionCached.language)),this.modelSet=!0;else if(this.modelSet){const t=this.editorInstance.getModel();this.preservePositionAndSelections(()=>{t.modified.setValue(this.value),t.original.setValue(this.nzOriginalText)})}else{const t=this.editorOptionCached.language;this.editorInstance.setModel({original:monaco.editor.createModel(this.nzOriginalText,t),modified:monaco.editor.createModel(this.value,t)}),this.modelSet=!0}}}preservePositionAndSelections(t){if(!this.editorInstance)return void t();const n=this.editorInstance.getPosition(),r=this.editorInstance.getSelections();t(),n&&this.editorInstance.setPosition(n),r&&this.editorInstance.setSelections(r)}setValueEmitter(){const t="normal"===this.nzEditorMode?this.editorInstance.getModel():this.editorInstance.getModel().modified;this.onDidChangeContentDisposable=t.onDidChangeContent(()=>{this.emitValue(t.getValue())})}emitValue(t){this.value!==t&&(this.value=t,this.ngZone.run(()=>{this.onChange(t)}))}updateOptionToMonaco(){this.editorInstance&&this.editorInstance.updateOptions({...this.editorOptionCached})}static#t=this.\u0275fac=function(n){return new(n||o)(i.Y36(w),i.Y36(i.R0b),i.Y36(i.SBq),i.Y36(K.t4))};static#i=this.\u0275cmp=i.Xpm({type:o,selectors:[["nz-code-editor"]],inputs:{nzEditorMode:"nzEditorMode",nzOriginalText:"nzOriginalText",nzLoading:"nzLoading",nzFullControl:"nzFullControl",nzToolkit:"nzToolkit",nzEditorOption:"nzEditorOption"},outputs:{nzEditorInitialized:"nzEditorInitialized"},exportAs:["nzCodeEditor"],features:[i._Bn([{provide:a.JU,useExisting:(0,i.Gpc)(()=>o),multi:!0}])],decls:2,vars:2,consts:[["class","ant-code-editor-loading",4,"ngIf"],["class","ant-code-editor-toolkit",4,"ngIf"],[1,"ant-code-editor-loading"],[1,"ant-code-editor-toolkit"],[3,"ngTemplateOutlet"]],template:function(n,r){1&n&&(i.YNc(0,F,2,0,"div",0),i.YNc(1,$,2,1,"div",1)),2&n&&(i.Q6J("ngIf",r.nzLoading),i.xp6(1),i.Q6J("ngIf",r.nzToolkit))},dependencies:[m.O5,m.tP,y.W],encapsulation:2,changeDetection:0})}return(0,c.gn)([(0,v.yF)()],o.prototype,"nzLoading",void 0),(0,c.gn)([(0,v.yF)()],o.prototype,"nzFullControl",void 0),o})(),N=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#i=this.\u0275mod=i.oAB({type:o});static#e=this.\u0275inj=i.cJS({imports:[m.ez,W.PV,y.j]})}return o})()}}]);